{% load staticfiles %}
<html>
<head>
  <script src="https://unpkg.com/konva@2.4.2/konva.min.js"></script>
  <meta charset="utf-8">
  <link href="{% static 'css/style.css' %}" rel="stylesheet" type="text/css" />
  <title>Let's meet !</title>
</head>

<body>

  <input id="input" type="text" / value='{{ copy }}'>
  <button id="copy">Copy</button>
  <div id="container"></div>

  <script>
    function copy() {
      var copyText = document.querySelector("#input");
      copyText.select();
      document.execCommand("copy");
    };
    document.querySelector("#copy").addEventListener("click", copy);

    var width = window.innerWidth;
    var height = window.innerHeight;

    var stage = new Konva.Stage({
        container: "container",
        width: width,
        height: height
    });

    var layer = new Konva.Layer();
        
    var dayArray=[
        {Order:1, Day:'Mon'},
        {Order:2, Day:'Tus'},
        {Order:3, Day:'Wed'},
        {Order:4, Day:'Thu'},
        {Order:5, Day:'Fri'},
        {Order:6, Day:'Sat'},
        {Order:7, Day:'Sun'}];  //here

    var show = [];
    {% for d in dC %}
      for(var i = 0; i < 7; i++) {
        if (dayArray[i].Order == {{ d }}) {
          show.push({Order: {{ d }}, Day: dayArray[i].Day});
          break;
        };
      };
    {% endfor %}

  </script>

<!-------------------------------------------------------------->
    
  <script>
    var y = 0
    for(var x = 0; x < show.length; x++) {
        var simpleText = new Konva.Text({
            x: 145+y*80,
            y: 240,
            text: show[x].Day,
            fontSize: 30,
            fontFamily: 'Calibri',
            fill: 'black'
        });
        
        simpleText.setOffset({
            x: simpleText.getWidth() / 2
        });

        var rectangle = new Konva.Rect({
            id: show[x].Order,
            x: 120+y*80,
            y: 280,
            width:50,
            height:250,
            fill: 'red',
            stroke: 'black',
            strokeWidth: 4
        });

        //rectangle.on('click', function() {
        //    var fill = this.fill() == 'red' ? '#00d00f' : 'red';
        //    this.fill(fill);
        //    layer.draw();
        //    if (this.fill() != 'red') {
        //        freeDay.push(parseInt(this.id()));  //here
        //        //alert(this.id())
        //    } else {
        //        var n = freeDay.indexOf(parseInt(this.id()));  //here
        //        freeDay.splice(n,1);
        //    }
        //});

        layer.add(simpleText);
        layer.add(rectangle);
      y=y+1
    };
    </script>

    <script>
      stage.add(layer);
    </script>

</body>

</html>